<html>
  <head>
    <!-- Stylesheets -->
    <link href="style.css" rel="stylesheet" type="text/css">

    <!-- JQuery UI theme -->
    <link href="jquery/themes/base/jquery-ui.css" rel="stylesheet">

    <title>The Letter</title>
  </head>
  <body>

    <!-- Game container -->
    <div id="gameContainer">
      <div id="undo" class="letter undo"></div>
      <h1>The Letter</h1>

      <span id="letter">
	<!-- Preloading animation from http://preloaders.net/ -->
	<br> Loading... <br> <br> <img src="img/loading.gif">
      </span>

      <br><br><br><br>
      <div id="slidersParent" style="display:none">
	<div id="sliders"></div>
      </div>

      <br><br><br>
    </div>
      <div id="editor"></div>

      <div id="reveal">
	<small>
	<i>Well, it looks like you finished the letter. Try modifying the template, then <a href="#" onclick="rebuild()">rebuild</a>.</i>
	<i><br>The template language describes a <a href="http://en.wikipedia.org/wiki/Context-free_grammar">context-free grammar</a>, which the player controls. The syntax is shown beneath the edit box.</i>
	</small>
	<br>
	<textarea id="template" rows="50" columns="80" style="width: 100%; min-height: 400px; vertical-align: text-top">
	</textarea>
	<small><br><div id="TemplateSyntax"></div></small>
	
      </div>

    <!-- JQuery UI -->
    <script src="jquery/jquery-1.9.1.js"></script>
    <script src="jquery/ui/jquery-ui.js"></script>

    <!-- LetterWriter library & parser -->
    <script type="text/javascript" src="lib/letter.js"></script>
    <script type="text/javascript" src="lib/parser/letter.js"></script>

    <script type="text/javascript">
      var g, l, e, template;
      $(function(){
      var xhr = new XMLHttpRequest();
      xhr.open ("GET", "doc/TemplateSyntax.html", false);
      xhr.send();
      $("#TemplateSyntax")[0].innerHTML = xhr.responseText;

      g = LetterWriter.Grammar.newFromUrl("template/king.letter")
      template = document.getElementById("template")
      template.value = g.toCanonicalString()
      l = g.newLetter()
      e = g.newEditor()

      function rebuild() {
        l.clear()
        g = new LetterWriter.Grammar(editor.value)
        l = g.newLetter()
        l.conceal = function() { }   // turn off conceal, don't hide edit box
      }

      });
    </script>

  </body>
</html>
